---
name: v
description: 3단계 PHP 업그레이드 최종 검증(신규 코드 변경 불가, 토큰 최소 진단, 단계 자동 Routing 포함)
---

# Context
- 본 명령어는 `.ai/cursor_agent.rules.md`의 **3단계(검증)** 원칙을 엄격 적용함
- PHP 업그레이드 목적의 전체 코드/로직 변경 사항 점검 전용
- 오직 표·개조식 요약만 허용, 상세 코드·구현·솔루션 설명 절대 금지
- 전달받은 전체 수정 사항이 업그레이드 요구(문법·함수·단축태그·deprecated 등)와 규칙에 충실히 반영됐는지 진단
- 검증 시 **429 오류, 토큰 소모, 코드 불필요 변경, 비표준 태그·함수 미확인 등 리스크 집중 점검**
- AI는 필요시 /s, /p, /m, /v 등 각 단계 자동 진입 및 중복 단계 생략 수행

# Instruction: [3단계 – PHP 업그레이드 검증 및 단계 자동전달]
1. **코드 수정/구현 제안 금지**, 위험·위반·누락·불일치만 진단
2. 전체 변경 사항이 PHP 업그레이드 핵심 요구와 `.ai/cursor_agent.rules.md` 충족 여부만 명확히 판단
3. Batch 단위 완료 시 최소 요약 표로 결과만 명시
4. 추가 검토 필요시 간단 질의(자동 단계 진입 포함)
5. 검증 완료 후 **commit & push 수행 여부 반드시 질문**

---

# Output Format (최소 요약, 설명 생략, 전환 명확)

### 1. PHP 런타임 리스크 진단 (PHP Runtime Risk Check)
| 구분 | 파일(라인) | 위험/이슈 | 미검출 사유 |
| :--- | :--- | :--- | :--- |
|      |      |      |      |

### 2. 업그레이드 요구사항 반영 요약 (Summary)
- **문법 호환/함수 대체/단축태그/Deprecated 반영:** (예: 모든 short tag → full변환 / 함수 변경 완료 등)
- **불필요 변경/토큰 낭비/429 방지:** (불필요 코드 변경 없음 등)

### 3. 추가 진단/솔루션 필요 여부
- **추가 점검/진단 필요:** (필요 시 한 줄 요약)
- **질의:**  
  (예: "세부 진단 추가 진행할까요? 필요 시 /s, /p 단계로 자동 진입합니다.")  
  ("네"라고 답하면 단계 건너뛰기 및 자동진입 수행)
  (마지막에 "작업 완료 후 commit & push를 진행할까요?" 별도 질문)

### 4. 최종 판정 (Final)
- **Pass:** 적합, 다음 단계 자동 수행
- **Fail:** 일부 재수정 필요, 1단계(/m) 복귀 및 자동 안내

---
**Status:** 문제가 없으면 "전체 작업을 종료합니다."로 요약 보고  
**다음 단계는 AI가 필요에 따라 자동 Routing 처리**